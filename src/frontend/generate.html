<!-- ğŸ”‘ API Key Input -->
<input id="openai_api_key" placeholder="Enter your OpenAI API Key" class="input-class">
<span id="api_status"></span>
<button id="clear_api_btn" class="hidden">âŒ</button>

<!-- ğŸ“‹ Main eBook Info -->
<input id="titleInput" placeholder="Title" class="input-class" />
<input id="topicInput" placeholder="Topic" class="input-class" />
<input id="coverPromptInput" placeholder="Cover Prompt" class="input-class" />

<!-- âœï¸ Description & AI Guidance -->
<textarea id="descInput" placeholder="What is this eBook about?" class="input-class"></textarea>
<textarea id="ai_instructions" placeholder="Extra instructions for AI (e.g. include table, keep tone friendly)" class="input-class"></textarea>

<!-- ğŸ”— Affiliate Link Setup -->
<div class="mt-4 space-y-2" id="affiliateOptions">
  <label class="block text-sm font-semibold text-gray-700">ğŸ“Œ Add Affiliate CTA</label>
  <label class="text-sm flex items-center gap-2">
    <input type="checkbox" id="include_affiliate_links" class="mr-1" />
    Enable Affiliate CTA in eBook
  </label>

  <div id="affiliateLinkFields" class="hidden space-y-2 mt-2">
    <input id="affiliate_link_url" type="url" class="input-class" placeholder="Affiliate link (e.g. https://...)" />
    <input id="affiliate_cta_label" type="text" class="input-class" placeholder="CTA Button Label (e.g. Buy Now)" />
    <input id="affiliate_keywords" type="text" class="input-class" placeholder="Trigger keywords (comma-separated)" />
  </div>
</div>

<!-- ğŸ”˜ Output Format -->
<label><input type="radio" name="output_format" value="pdf" checked> PDF</label>
<label><input type="radio" name="output_format" value="epub"> EPUB</label>


<!-- ğŸ”˜ language -->
<select id="language" name="language" class="border px-4 py-2 rounded" required>
  <option value="">Select Language</option>
  <option value="English">English</option>
  <option value="Hindi">Hindi</option>
  <option value="Spanish">Spanish</option>
  <option value="French">French</option>
  <option value="German">German</option>
  <option value="Arabic">Arabic</option>
  <option value="Portuguese">Portuguese</option>
  <option value="Indonesian">Indonesian</option>
  <option value="Bengali">Bengali</option>
  <option value="Chinese">Chinese</option>
</select>

<!-- ğŸ¯ Audience -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<select id="audience" name="audience" class="border px-4 py-2 rounded" required>
  <option value="">Select Audience</option>
  <option>Kids</option>
  <option>Teens</option>
  <option>Students</option>
  <option>Parents</option>
  <option>Teachers</option>
  <option>Professionals</option>
  <option>Entrepreneurs</option>
  <option>Freelancers</option>
  <option>Experts</option>
  <option>General Public</option>
  <option>Hobbyists</option>
  <option>Lifelong Learners</option>
</select>

<!-- ğŸ’¬ Tone -->
<select id="tone" name="tone" class="border px-4 py-2 rounded" required>
  <option value="">Select Tone</option>
  <option>Friendly</option>
  <option>Professional</option>
  <option>Conversational</option>
  <option>Persuasive</option>
  <option>Inspirational</option>
  <option>Humorous</option>
  <option>Casual</option>
  <option>Educational</option>
  <option>Empathetic</option>
  <option>Authoritative</option>
  <option>Story-based</option>
</select>

<!-- ğŸ¯ Purpose -->
<select id="purpose" name="purpose" class="border px-4 py-2 rounded" required>
  <option value="">Select Purpose</option>
  <option>Informative</option>
  <option>Educational / Tutorial</option>
  <option>Promotional / Affiliate</option>
  <option>Storytelling</option>
  <option>Lead Generation</option>
  <option>Thought Leadership</option>
  <option>Problem-Solving Guide</option>
  <option>Awareness Building</option>
  <option>Entertainment</option>
</select>
</div>


<!-- ğŸ¨ Formatting Options -->
<select id="font_type"><option value="Merriweather">Merriweather</option><option value="Inter">Inter</option></select>
<select id="font_size"><option value="12pt">12pt</option><option value="14pt">14pt</option></select>
<select id="line_spacing"><option value="1.5">1.5</option><option value="2">2</option></select>
<select id="paragraph_spacing"><option value="12px">12px</option><option value="18px">18px</option></select>
<input id="margin_top" value="1in">
<input id="margin_right" value="1in">
<input id="margin_bottom" value="1in">
<input id="margin_left" value="1in">
<select id="page_size"><option value="A4">A4</option><option value="Letter">Letter</option></select>
<select id="text_alignment"><option value="justify">Justify</option><option value="left">Left</option></select>

<!-- ğŸ–¼ï¸ Cover Section -->
<img id="cover_preview" class="hidden w-full max-w-md mx-auto mb-2">
<button id="deleteCoverBtn" class="hidden">âŒ Delete Cover</button>
<button id="regenerateCoverBtn" class="hidden">â™»ï¸ Regenerate Cover</button>
<label id="uploadCoverLabel" for="uploadCoverInput" class="cursor-pointer">ğŸ“¤ Upload Cover</label>
<input type="file" id="uploadCoverInput" accept="image/*" class="hidden">

<!-- ğŸ“¸ Image Count -->
<select id="image_count">
  <option value="0">No Images</option>
  <option value="2">2 Images</option>
  <option value="5">5 Images</option>
  <option value="10">10 Images</option>
</select>

<!-- ğŸ”˜ Content Source Type -->
<label><input type="radio" name="input_type" value="url" checked> URL to eBook</label>
<label><input type="radio" name="input_type" value="ai"> Generate via AI</label>
<input id="source_url" placeholder="Paste Article URL here" class="input-class">

<!-- ğŸ§® Credit Estimate + Action Buttons -->
<div id="credit-estimate-msg" class="mt-2 text-sm text-gray-600 italic"></div>
<button id="generateBtn" class="bg-blue-600 text-white px-4 py-2 rounded mt-3">ğŸš€ Generate</button>
<button id="saveFormattingBtn" class="bg-gray-600 text-white px-4 py-2 rounded">ğŸ’¾ Save Formatting</button>
<button id="templateSelectBtn" class="bg-gray-100 text-sm border rounded px-3 py-1 hover:bg-gray-200">ğŸ¨ Choose Design Template</button>

<!-- ğŸ“¬ Email Sending -->
<input id="recipientEmail" type="email" placeholder="Enter email" class="input-class">
<textarea id="emailMessage" placeholder="Add optional note..." class="input-class"></textarea>
<button id="sendEmailBtn" class="bg-blue-600 text-white px-4 py-2 rounded">ğŸ“© Send eBook</button>

<!-- ğŸ§¾ Sticky Footer (Download + Credit Badge) -->
<div class="sticky bottom-0 bg-white shadow-inner p-3 flex gap-4 justify-between items-center border-t mt-6 z-10">
  <a id="saveBtn" class="bg-green-600 text-white px-4 py-2 rounded hidden">â¬‡ï¸ Save / Download</a>
  <span id="creditBadge" class="text-sm text-gray-600 ml-auto"></span>
</div>

<!-- ğŸ”„ Spinner -->
<div id="spinner" class="hidden text-center text-sm mt-4">ğŸ”„ Generating...</div>

<!-- ğŸ“– Preview Area -->
<div id="ebook_preview_area" class="overflow-y-auto max-h-[600px] mt-6 border p-4 rounded"></div>

<!-- ğŸ§© Template Preview Placeholder (Optional) -->
<div id="template-preview-area" class="grid grid-cols-2 gap-4 mt-4"></div>

<!-- â™»ï¸ Example Regens (Static Example Only) -->
<img data-image-id="img123" src="..." />
<button class="regen-img-btn" data-image-id="img123">â™»ï¸ Regenerate</button>
<div data-block-id="block456">Some paragraph...</div>
<button class="regen-text-btn" data-block-id="block456">â™»ï¸ Regenerate</button>

<!-- ğŸ¨ Template Picker Modal -->
<div id="templateModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-5xl">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold">Choose Your Design Template</h2>
      <button onclick="document.getElementById('templateModal').classList.add('hidden')" class="text-gray-500 hover:text-red-600">âœ–</button>
    </div>

    <!-- Preview Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      <!-- Template Card Example -->
      <div class="template-card border rounded-lg overflow-hidden shadow group hover:ring-2 hover:ring-blue-500 cursor-pointer" data-template-id="template-classic">
        <img src="/templates/classic-preview.png" class="w-full h-48 object-cover">
        <div class="p-3">
          <p class="font-semibold text-center">ğŸ“˜ Classic</p>
          <p class="text-sm text-center text-gray-500 group-[data-selected='true']:text-green-600 hidden">âœ… Selected</p>
        </div>
      </div>

      <div class="template-card border rounded-lg overflow-hidden shadow group hover:ring-2 hover:ring-blue-500 cursor-pointer" data-template-id="template-modern">
        <img src="/templates/modern-preview.png" class="w-full h-48 object-cover">
        <div class="p-3">
          <p class="font-semibold text-center">ğŸ§‘â€ğŸ’» Modern</p>
          <p class="text-sm text-center text-gray-500 group-[data-selected='true']:text-green-600 hidden">âœ… Selected</p>
        </div>
      </div>

      <div class="template-card border rounded-lg overflow-hidden shadow group hover:ring-2 hover:ring-blue-500 cursor-pointer" data-template-id="template-elegant">
        <img src="/templates/elegant-preview.png" class="w-full h-48 object-cover">
        <div class="p-3">
          <p class="font-semibold text-center">ğŸ’ Elegant</p>
          <p class="text-sm text-center text-gray-500 group-[data-selected='true']:text-green-600 hidden">âœ… Selected</p>
        </div>
      </div>
    </div>

    <!-- Footer Actions -->
    <div class="mt-6 flex justify-end gap-3">
      <button id="applyTemplateBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">Apply</button>
      <button onclick="document.getElementById('templateModal').classList.add('hidden')" class="text-gray-600 hover:underline">Cancel</button>
    </div>
  </div>
</div>

<!-- Trigger Button Anywhere -->
<button id="templateSelectBtn" class="bg-gray-100 text-sm border rounded px-3 py-1 hover:bg-gray-200">ğŸ¨ Choose Design Template</button>

<!-- âœ… Final Scripts -->
<script src="/frontend/utils.js"></script>
<script src="/frontend/credit.js"></script>
<script src="/frontend/generate.js"></script>
<script src="/frontend/cover.js"></script>
<script src="/frontend/regen.js"></script>
<script src="/frontend/prebuildTemplate.js"></script>
<script src="/frontend/email.js"></script>
<script src="/frontend/security.js"></script>

<script>
  window.addEventListener("DOMContentLoaded", async () => {
    if (typeof initGenerator === "function") initGenerator();
    if (typeof initRegenHandlers === "function") initRegenHandlers();
    if (typeof setupTemplatePicker === "function") setupTemplatePicker();
    if (typeof initEmailSender === "function") initEmailSender();
  });
</script>
